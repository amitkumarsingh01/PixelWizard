<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SLIET Mentorship Platform</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-logo">
            <img src="../assets/logo.png" alt="SLIET Logo" />
            <div class="header-text">
                <h1>Deptt. of Computer Science & Engineering</h1>
                <h2>Sant Longowal Institute of Engineering & Technology, Longowal</h2>
            </div>
        </div>
        <nav>
            <a href="../index.html">Home</a>
            <a href="../pages/booking.html">Booking</a>
            <a href="../pages/faculty.html">Faculty</a>
        </nav>
    </header>

    <!-- Main Content -->
    <div class="container">
        <h3>Professors</h3>
        <div class="faculty-list">
            <div class="faculty-member" id="birmohan">
                <div class="member-avatar">
                    <img src="http://sliet.ac.in/wp-content/uploads/avatars/5/6fc17d6735998f4f22a0e91fbf43b75c-bpfull.jpg" alt="Dr. Birmohan Singh">
                </div>
                <div class="faculty-info">
                    <h4>Dr. Birmohan Singh</h4>
                    <button class="view-bookings">Slot Booked: <span class="booking-count">0</span></button>
                </div>
            </div>

            <!-- Repeat similar blocks for other faculty members -->

        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>&copy; 2024 Deptt. of Computer Science, SLIET. All rights reserved.</p>
    </footer>

    <!-- Pop-up Modal -->
    <div id="booking-details-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3>Booking Details</h3>
            <div id="booking-details"></div>
        </div>
    </div>

    <script>
        // Load bookings from localStorage
        const bookings = JSON.parse(localStorage.getItem("facultyBookings")) || {};

        // Display the booking count for each faculty
        const facultyMembers = {
            'birmohan': 'Dr. Birmohan Singh',
            // Add other faculty ID mappings
        };

        for (let facultyId in facultyMembers) {
            const facultyName = facultyMembers[facultyId];
            const count = bookings[facultyName] ? bookings[facultyName].length : 0;
            document.querySelector(`#${facultyId} .booking-count`).textContent = count;
        }

        // Handle click event on "Slot Booked" buttons to show modal
        document.querySelectorAll('.view-bookings').forEach(button => {
            button.addEventListener('click', function () {
                const facultyId = this.closest('.faculty-member').id;
                const facultyName = facultyMembers[facultyId];
                const facultyBookings = bookings[facultyName] || [];

                let detailsHTML = '';
                facultyBookings.forEach(booking => {
                    detailsHTML += `
                        <p><strong>Name:</strong> ${booking.name}</p>
                        <p><strong>Registration No:</strong> ${booking.regNo}</p>
                        <p><strong>Interests:</strong> ${booking.interests}</p>
                        <p><strong>Time:</strong> ${booking.time}</p>
                        <p><strong>Booked on:</strong> ${booking.timestamp}</p>
                        <hr>
                    `;
                });

                document.getElementById('booking-details').innerHTML = detailsHTML;
                document.getElementById('booking-details-modal').style.display = 'block';
            });
        });

        // Close the modal when clicking on the close button
        document.querySelector('.close-btn').addEventListener('click', function () {
            document.getElementById('booking-details-modal').style.display = 'none';
        });
    </script>
</body>
</html>
